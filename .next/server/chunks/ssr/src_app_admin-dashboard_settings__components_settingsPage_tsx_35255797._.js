module.exports=[41907,a=>{"use strict";a.s(["default",()=>w],41907);var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(91119),f=a.i(96221),g=a.i(70025),h=a.i(33217),i=a.i(37927);let j="http://localhost:5000/api";async function k(a){if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Something went wrong");return a.json()}var l=a.i(23292),m=a.i(99570);let n=(0,a.i(70106).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var o=a.i(71987);function p({imagePreview:a,fullName:c,isUpdating:d,onImageChange:e,onUpload:g}){return(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 border-4 border-white shadow-lg",children:a?(0,b.jsx)(o.default,{src:a,alt:"Profile",width:96,height:96,className:"object-cover w-full h-full"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-2xl font-bold",children:c.charAt(0).toUpperCase()||"U"})}),(0,b.jsx)("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 bg-[#DF1020] text-white p-2 rounded-full cursor-pointer hover:bg-[#DF1020]/80 transition-colors shadow-lg",children:(0,b.jsx)(n,{className:"w-4 h-4"})}),(0,b.jsx)("input",{type:"file",id:"profile-image",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){if(!b.type.startsWith("image/"))return void l.toast.error("Please select a valid image file");if(b.size>0xa00000)return void l.toast.error("Image size should be less than 10MB");e(b)}},className:"hidden"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Your Profile Picture"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"PNG, JPG up to 10MB"}),(0,b.jsx)(m.Button,{onClick:g,disabled:d,className:"mt-3 bg-[#DF1020] hover:bg-[#DF1020]/80",children:d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):"Upload Image"})]})]})}var q=a.i(66718),r=a.i(70430);function s({fullName:a,setFullName:c,setUsername:d,email:e,phone:g,setPhone:h,role:i,setRole:j,isUpdating:k,onSubmit:l,onReset:n,organizationName:o,setOrganizationName:p}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"fullName",children:"Full Name"}),(0,b.jsx)(q.Input,{id:"fullName",value:a,onChange:a=>c(a.target.value),placeholder:"Enter your full name",className:"mt-1 border border-[#DF1020] bg-white text-gray-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(q.Input,{id:"email",value:e,disabled:!0,className:"mt-1 bg-gray-100 border border-[#DF1020]  text-gray-600 cursor-not-allowed"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"username",children:"Username"}),(0,b.jsx)(q.Input,{id:"username",value:a.split(" ").join("").toLowerCase(),onChange:a=>d(a.target.value),placeholder:"Enter your username",readOnly:!0,disabled:!0,className:"mt-1 border border-[#DF1020] bg-white text-gray-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"phoneNumber",children:"Phone Number"}),(0,b.jsx)(q.Input,{id:"phoneNumber",value:g,onChange:a=>h(a.target.value),placeholder:"+1 (555) 000-0000",className:"mt-1 border border-[#DF1020] bg-white text-gray-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"role",children:"Role"}),(0,b.jsx)(q.Input,{id:"Role",value:i,onChange:a=>j(a.target.value),placeholder:"User | Admin | Organizer",readOnly:!0,className:"mt-1 border border-[#DF1020] bg-white text-gray-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"role",children:"Organization Name"}),(0,b.jsx)(q.Input,{id:"organaization",value:o,onChange:a=>p(a.target.value),placeholder:"organization name",className:"mt-1 border border-[#DF1020] bg-white text-gray-600"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(m.Button,{onClick:l,disabled:k,className:"min-w-[140px] bg-[#DF1020] hover:bg-[#DF1020]/80",children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Profile"}),(0,b.jsx)(m.Button,{type:"button",variant:"outline",onClick:n,disabled:k,children:"Reset"})]})]})}var t=a.i(77156),u=a.i(41379);function v({oldPassword:a,setOldPassword:d,newPassword:e,setNewPassword:g,confirmPassword:h,setConfirmPassword:i,isUpdating:j,onSubmit:k,onReset:l}){let[n,o]=c.default.useState(!1),[p,s]=c.default.useState(!1),[v,w]=c.default.useState(!1);return(0,b.jsxs)("div",{className:"space-y-12 max-w-full",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"space-y-3.5",children:[(0,b.jsx)(r.Label,{htmlFor:"oldPassword",children:"Current Password"}),(0,b.jsxs)("div",{className:"relative mt-1",children:[(0,b.jsx)(q.Input,{id:"oldPassword",type:n?"text":"password",value:a,onChange:a=>d(a.target.value),placeholder:"Enter current password",className:"border border-[#DF1020] bg-white text-gray-600 py-5"}),(0,b.jsx)("button",{type:"button",onClick:()=>o(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:n?(0,b.jsx)(u.EyeOff,{className:"w-4 h-4"}):(0,b.jsx)(t.Eye,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-3.5",children:[(0,b.jsx)(r.Label,{htmlFor:"newPassword",children:"New Password"}),(0,b.jsxs)("div",{className:"relative mt-1",children:[(0,b.jsx)(q.Input,{id:"newPassword",type:p?"text":"password",value:e,onChange:a=>g(a.target.value),placeholder:"Enter new password",className:"border border-[#DF1020] bg-white text-gray-600 py-5"}),(0,b.jsx)("button",{type:"button",onClick:()=>s(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:p?(0,b.jsx)(u.EyeOff,{className:"w-4 h-4"}):(0,b.jsx)(t.Eye,{className:"w-4 h-4"})})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3.5",children:[(0,b.jsx)(r.Label,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,b.jsxs)("div",{className:"relative mt-1",children:[(0,b.jsx)(q.Input,{id:"confirmPassword",type:v?"text":"password",value:h,onChange:a=>i(a.target.value),placeholder:"Confirm new password",className:"border border-[#DF1020] bg-white text-gray-600 py-5"}),(0,b.jsx)("button",{type:"button",onClick:()=>w(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:v?(0,b.jsx)(u.EyeOff,{className:"w-4 h-4"}):(0,b.jsx)(t.Eye,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(m.Button,{onClick:k,disabled:j,className:"min-w-[140px] bg-[#DF1020] hover:bg-[#DF1020]/80",children:j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Change Password"}),(0,b.jsx)(m.Button,{type:"button",className:"border border-gray-300 bg-white rounded-sm font-normal text-gray-500",variant:"ghost",onClick:l,disabled:j,children:"Reset"})]})]})}function w(){let a,{data:m,update:n}=(0,d.useSession)(),o=m?.user?.accessToken||"",[q,r]=(0,c.useState)("profile"),[t,u]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),{data:S,isLoading:T,refetch:U}=(0,h.useQuery)({queryKey:["user-profile",o],queryFn:async()=>k(await fetch(`${j}/user/profile`,{headers:{Authorization:`Bearer ${o}`},credentials:"include"})),enabled:!!o});console.log("Profile Image:",S?.data?.phone);let{mutate:V,isPending:W}=((a,b)=>{let c=(0,i.useQueryClient)();return(0,g.useMutation)({mutationFn:async b=>k(await fetch(`${j}/user/profile`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(b)})),onSuccess:()=>{c.invalidateQueries({queryKey:["user-profile"]}),b?.onSuccess?.()},onError:a=>{b?.onError?.(a)}})})(o,{onSuccess:async()=>{l.toast.success("Profile updated successfully ✅"),await U(),await n()},onError:a=>l.toast.error(a.message||"Failed to update profile ❌")}),{mutate:X,isPending:Y}=((a,b)=>{let c=(0,i.useQueryClient)();return(0,g.useMutation)({mutationFn:async b=>k(await fetch(`${j}/user/profile/image`,{method:"PUT",body:b,credentials:"include",headers:{Authorization:`Bearer ${a}`}})),onSuccess:()=>{c.invalidateQueries({queryKey:["user-profile"]}),b?.onSuccess?.()},onError:a=>{b?.onError?.(a)}})})(o,{onSuccess:async()=>{l.toast.success("Profile image updated successfully ✅"),J(null),await U()},onError:a=>l.toast.error(a.message||"Failed to update profile image ❌")}),{mutate:Z,isPending:$}=(a={onSuccess:()=>{l.toast.success("Password changed successfully ✅"),N(""),P(""),R("")},onError:a=>l.toast.error(a.message||"Failed to change password ❌")},(0,g.useMutation)({mutationFn:async a=>k(await fetch(`${j}/auth/change-password`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(a)})),onSuccess:()=>{a?.onSuccess?.()},onError:b=>{a?.onError?.(b)}}));(0,c.useEffect)(()=>{if(S?.data){let a=S.data;u(a.fullName||""),x(a.username||""),z(a.email||""),B(a.phone||""),D(a.role||""),F(a.organizationName||""),H(a.profileImage||""),L(a.profileImage||"")}},[S]);let _=()=>{if("profile"===q){if(S?.data){let a=S.data;u(a.fullName||""),x(a.username||""),B(a.phone||""),D(a.role||""),F(a.organizationName||""),L(a.profileImage||""),J(null)}}else N(""),P(""),R("")};return T?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)(f.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,b.jsx)("div",{className:"container mx-auto ",children:(0,b.jsx)(e.Card,{className:"border-none shadow-none bg-transparent",children:(0,b.jsxs)(e.CardContent,{className:"",children:[(0,b.jsxs)("div",{className:"flex border-b mb-6",children:[(0,b.jsx)("button",{onClick:()=>r("profile"),className:`px-6 py-3 font-medium transition-colors cursor-pointer ${"profile"===q?"primary-color-red border-b-2 border-[#DF1020]":"text-gray-500 hover:text-gray-900"}`,children:"Personal Information"}),(0,b.jsx)("button",{onClick:()=>r("password"),className:`px-6 py-3 font-medium transition-colors cursor-pointer ${"password"===q?"primary-color-red border-b-2 border-[#DF1020]":"text-gray-600 hover:text-gray-900"}`,children:"Change Password"})]}),"profile"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(p,{imagePreview:K,fullName:t,isUpdating:Y,onImageChange:a=>{J(a);let b=new FileReader;b.onloadend=()=>L(b.result),b.readAsDataURL(a)},onUpload:()=>{if(!I)return void l.toast.error("Please select an image before uploading");let a=new FormData;a.append("profileImage",I),X(a)}}),(0,b.jsx)("hr",{className:"bg-[#DF1020] h-[1.5px]"}),(0,b.jsx)(s,{fullName:t,setFullName:u,username:w,setUsername:x,email:y,phone:A,setPhone:B,role:C,setRole:D,isUpdating:W,onSubmit:()=>{V({fullName:t,username:w,phone:A,role:C,organizationName:E})},onReset:_,organizationName:E,setOrganizationName:F})]}),"password"===q&&(0,b.jsx)(v,{oldPassword:M,setOldPassword:N,newPassword:O,setNewPassword:P,confirmPassword:Q,setConfirmPassword:R,isUpdating:$,onSubmit:()=>M&&O&&Q?O!==Q?void l.toast.error("New passwords do not match"):O.length<6?void l.toast.error("Password must be at least 6 characters"):void Z({oldPassword:M,newPassword:O}):void l.toast.error("Please fill in all password fields"),onReset:_})]})})})}}];

//# sourceMappingURL=src_app_admin-dashboard_settings__components_settingsPage_tsx_35255797._.js.map