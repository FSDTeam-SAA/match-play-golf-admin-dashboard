module.exports=[49078,a=>{"use strict";a.s(["default",()=>F],49078);var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(70025),f=a.i(33217),g=a.i(37927);let h="http://localhost:5000/api";async function i(a){if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Something went wrong");return a.json()}var j=a.i(23878),k=a.i(77156),l=a.i(99464),m=a.i(81560),n=a.i(99570),o=a.i(14574),p=a.i(96221),q=a.i(71987);function r({memberId:a,open:c,onOpenChange:e}){let g,{data:j}=(0,d.useSession)(),k=j?.user?.accessToken||"",{data:l,isLoading:m}=(g=c?a:void 0,(0,f.useQuery)({queryKey:["team-member",g],queryFn:async()=>{if(!g)throw Error("Member ID is required");return i(await fetch(`${h}/admin-team/${g}`,{headers:{Authorization:`Bearer ${k}`}}))},enabled:!!g&&!!k})),n=l?.data;return(0,b.jsx)(o.Dialog,{open:c,onOpenChange:e,children:(0,b.jsxs)(o.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(o.DialogHeader,{children:(0,b.jsx)(o.DialogTitle,{children:"Team Member Details"})}),m?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(p.Loader2,{className:"h-6 w-6 animate-spin"})}):n?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"relative h-32 w-32 rounded-lg overflow-hidden border",children:(0,b.jsx)(q.default,{src:n.image,alt:n.memberName,fill:!0,className:"object-cover"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,b.jsx)("p",{className:"mt-1 text-lg font-semibold",children:n.memberName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Designation"}),(0,b.jsx)("p",{className:"mt-1",children:n.designation})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Description"}),(0,b.jsx)("p",{className:"mt-1 text-sm leading-relaxed",children:n.description})]})]}):(0,b.jsx)("p",{children:"Team member not found"})]})})}var s=a.i(66718),t=a.i(29246),u=a.i(70430),v=a.i(73320),w=a.i(23292);function x({mode:a,member:f,open:j,onOpenChange:k}){let{data:l}=(0,d.useSession)(),m=l?.user?.accessToken||"",[r,x]=(0,c.useState)({memberName:"",designation:"",description:""}),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(""),{mutate:C,isPending:D}=(a=>{let b=(0,g.useQueryClient)();return(0,e.useMutation)({mutationFn:async b=>{let c=new FormData;return c.append("memberName",b.memberName),c.append("designation",b.designation),c.append("description",b.description),b.image instanceof File&&c.append("image",b.image),i(await fetch(`${h}/admin-team`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:c}))},onSuccess:()=>{b.invalidateQueries({queryKey:["team-members"]})}})})(m),{mutate:E,isPending:F}=(a=>{let b=(0,g.useQueryClient)();return(0,e.useMutation)({mutationFn:async({memberId:b,data:c})=>{let d=new FormData;return d.append("memberName",c.memberName),d.append("designation",c.designation),d.append("description",c.description),c.image instanceof File&&d.append("image",c.image),i(await fetch(`${h}/admin-team/${b}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`},body:d}))},onSuccess:()=>{b.invalidateQueries({queryKey:["team-members"]}),b.invalidateQueries({queryKey:["team-member"]})}})})(m),G=D||F;return(0,c.useEffect)(()=>{"edit"===a&&f?(x({memberName:f.memberName,designation:f.designation,description:f.description}),B(f.image)):(x({memberName:"",designation:"",description:""}),B("")),z(null)},[a,f,j]),(0,b.jsx)(o.Dialog,{open:j,onOpenChange:k,children:(0,b.jsxs)(o.DialogContent,{style:{width:"50vw",maxWidth:"55vw"},className:"max-h-[90vh] bg-gray-50 overflow-y-auto p-6 space-y-6",children:[(0,b.jsx)(o.DialogHeader,{children:(0,b.jsx)(o.DialogTitle,{children:"create"===a?"Add New Team Member":"Edit Team Member"})}),(0,b.jsxs)("form",{onSubmit:b=>{if(b.preventDefault(),"create"===a){if(!y)return void w.toast.error("Please select an image");C({...r,image:y},{onSuccess:()=>{w.toast.success("Team member created successfully"),k(!1)},onError:a=>{w.toast.error(a.message||"Failed to create team member")}})}else"edit"===a&&f&&E({memberId:f._id,data:{...r,image:y||f.image}},{onSuccess:()=>{w.toast.success("Team member updated successfully"),k(!1)},onError:a=>{w.toast.error(a.message||"Failed to update team member")}})},className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"memberName",children:"Member Name"}),(0,b.jsx)(s.Input,{id:"memberName",value:r.memberName,onChange:a=>x({...r,memberName:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"designation",children:"Designation"}),(0,b.jsx)(s.Input,{id:"designation",value:r.designation,onChange:a=>x({...r,designation:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(t.Textarea,{id:"description",value:r.description,onChange:a=>x({...r,description:a.target.value}),rows:4,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{htmlFor:"image",children:"Image Upload"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(s.Input,{id:"image",type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];b&&(z(b),B(URL.createObjectURL(b)))},className:"flex-1"}),(0,b.jsx)(n.Button,{type:"button",variant:"outline",size:"icon",asChild:!0,children:(0,b.jsx)("label",{htmlFor:"image",className:"cursor-pointer",children:(0,b.jsx)(v.Upload,{className:"h-4 w-4"})})})]}),A&&(0,b.jsx)("div",{className:"relative h-32 w-32 rounded-lg overflow-hidden border",children:(0,b.jsx)(q.default,{src:A,alt:"Preview",fill:!0,className:"object-cover"})})]}),(0,b.jsxs)(o.DialogFooter,{children:[(0,b.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>k(!1),disabled:G,children:"Cancel"}),(0,b.jsx)(n.Button,{type:"submit",disabled:G,children:G?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"create"===a?"Creating...":"Updating..."]}):"create"===a?"Add":"Save"})]})]})]})})}var y=a.i(73570);function z({memberId:a,memberName:c,open:f,onOpenChange:j}){let{data:k}=(0,d.useSession)(),{mutate:l,isPending:m}=(a=>{let b=(0,g.useQueryClient)();return(0,e.useMutation)({mutationFn:async b=>i(await fetch(`${h}/admin-team/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})),onSuccess:()=>{b.invalidateQueries({queryKey:["team-members"]})}})})(k?.user?.accessToken||"");return(0,b.jsx)(o.Dialog,{open:f,onOpenChange:j,children:(0,b.jsxs)(o.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsx)(o.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:(0,b.jsx)(y.AlertTriangle,{className:"h-5 w-5 text-red-600"})}),(0,b.jsx)(o.DialogTitle,{children:"Are You Sure?"})]})}),(0,b.jsxs)(o.DialogDescription,{children:["Are you sure you want to delete"," ",(0,b.jsx)("span",{className:"font-semibold",children:c})," from the team?"]}),(0,b.jsxs)(o.DialogFooter,{className:"flex gap-2 sm:gap-0",children:[(0,b.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:m,children:"Cancel"}),(0,b.jsx)(n.Button,{type:"button",variant:"destructive",onClick:()=>{l(a,{onSuccess:()=>{w.toast.success("Team member deleted successfully"),j(!1)},onError:a=>{w.toast.error(a.message||"Failed to delete team member")}})},disabled:m,children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})}function A({member:a}){let[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>e(!0),className:"h-8 w-8",children:(0,b.jsx)(k.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>g(!0),className:"h-8 w-8",children:(0,b.jsx)(l.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>i(!0),className:"h-8 w-8 text-red-600 hover:text-red-700",children:(0,b.jsx)(m.Trash2,{className:"h-4 w-4"})})]}),(0,b.jsx)(r,{memberId:a._id,open:d,onOpenChange:e}),(0,b.jsx)(x,{mode:"edit",member:a,open:f,onOpenChange:g}),(0,b.jsx)(z,{memberId:a._id,memberName:a.memberName,open:h,onOpenChange:i})]})}let B=[{accessorKey:"memberName",header:"",enableHiding:!0,cell:()=>null},{accessorKey:"image",header:"Member",cell:({row:a})=>{let c=a.getValue("image"),d=a.getValue("memberName");return(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 relative rounded-full overflow-hidden",children:(0,b.jsx)(q.default,{src:c,alt:d,fill:!0,className:"object-cover"})}),(0,b.jsx)("span",{className:"font-medium truncate max-w-[180px]",title:d,children:d})]})}},{accessorKey:"designation",header:"Designation"},{accessorKey:"description",header:"Description",cell:({row:a})=>{let c=a.getValue("description");return(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"max-w-[400px] truncate",title:c,children:c})})}},{id:"actions",header:"Action",cell:({row:a})=>(0,b.jsx)(A,{member:a.original})}];var C=a.i(15618),D=a.i(47913),E=a.i(92502);function F(){let a,[e,g]=(0,c.useState)(1),[k,l]=(0,c.useState)(!1),{data:m}=(0,d.useSession)(),{data:o,isLoading:p,isError:q}=(a=m?.user?.accessToken||"",(0,f.useQuery)({queryKey:["team-members"],queryFn:async()=>i(await fetch(`${h}/admin-team`,{headers:{Authorization:`Bearer ${a}`}})),enabled:!!a}));return p?(0,b.jsx)(D.default,{}):q?(0,b.jsx)(E.default,{title:"Failed to load articles",message:"Please try again later or check your network connection.",onRetry:()=>window.location.reload()}):(0,b.jsxs)("div",{className:"container mx-auto py-5",children:[(0,b.jsx)("div",{className:"mb-6 flex items-center justify-end",children:(0,b.jsxs)(n.Button,{onClick:()=>l(!0),className:"gap-2  bg-red-600 hover:bg-red-700",children:[(0,b.jsx)(C.Plus,{className:"h-4 w-4"}),"Add Team Member"]})}),(0,b.jsx)(j.DataTable,{columns:B,data:o?.data||[],pagination:{page:e,pageSize:10,total:o?.pagination.total||0,onPageChange:g}}),(0,b.jsx)(x,{mode:"create",open:k,onOpenChange:l})]})}}];

//# sourceMappingURL=src_app_admin-dashboard_team-management__components_team-management_tsx_593ec500._.js.map