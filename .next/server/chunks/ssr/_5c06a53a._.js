module.exports=[4650,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},77156,a=>{"use strict";a.s(["Eye",()=>b],77156);let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},96221,a=>{"use strict";a.s(["Loader2",()=>b.default]);var b=a.i(4650)},16111,a=>{"use strict";a.s(["default",()=>y],16111);var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(70025),f=a.i(33217),g=a.i(37927);let h="http://localhost:5000/api";async function i(a){if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Something went wrong");return a.json()}var j=a.i(23878),k=a.i(77156),l=a.i(81560),m=a.i(99570),n=a.i(14574),o=a.i(56711),p=a.i(96221);function q({contactId:a,open:c,onOpenChange:e}){let g,{data:j}=(0,d.useSession)(),k=j?.user?.accessToken||"",{data:l,isLoading:m}=(g=c?a:void 0,(0,f.useQuery)({queryKey:["contact",g],queryFn:async()=>{if(!g)throw Error("Contact ID is required");return i(await fetch(`${h}/contact/${g}`,{headers:{Authorization:`Bearer ${k}`}}))},enabled:!!g&&!!k})),q=l?.data;return(0,b.jsx)(n.Dialog,{open:c,onOpenChange:e,children:(0,b.jsxs)(n.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(n.DialogHeader,{children:(0,b.jsx)(n.DialogTitle,{children:"Contact Details"})}),m?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(p.Loader2,{className:"h-6 w-6 animate-spin"})}):q?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,b.jsx)("p",{className:"mt-1",children:q.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,b.jsx)("p",{className:"mt-1",children:q.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,b.jsx)("p",{className:"mt-1",children:q.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Date"}),(0,b.jsx)("p",{className:"mt-1",children:(0,o.format)(new Date(q.createdAt),"MMM dd, yyyy")})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Message"}),(0,b.jsx)("p",{className:"mt-1 text-sm",children:q.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Consent"}),(0,b.jsx)("p",{className:"mt-1",children:q.consent?"Yes":"No"})]})]}):(0,b.jsx)("p",{children:"Contact not found"})]})})}var r=a.i(73570),s=a.i(23292);function t({contactId:a,contactName:c,open:f,onOpenChange:j}){let{data:k}=(0,d.useSession)(),{mutate:l,isPending:o}=(a=>{let b=(0,g.useQueryClient)();return(0,e.useMutation)({mutationFn:async b=>i(await fetch(`${h}/contact/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})),onSuccess:()=>{b.invalidateQueries({queryKey:["contacts"]})}})})(k?.user?.accessToken||"");return(0,b.jsx)(n.Dialog,{open:f,onOpenChange:j,children:(0,b.jsxs)(n.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsx)(n.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:(0,b.jsx)(r.AlertTriangle,{className:"h-5 w-5 text-red-600"})}),(0,b.jsx)(n.DialogTitle,{children:"Are You Sure?"})]})}),(0,b.jsxs)(n.DialogDescription,{children:["Are you sure you want to delete contact from"," ",(0,b.jsx)("span",{className:"font-semibold",children:c}),"?"]}),(0,b.jsxs)(n.DialogFooter,{className:"flex gap-2 sm:gap-0",children:[(0,b.jsx)(m.Button,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:o,children:"Cancel"}),(0,b.jsx)(m.Button,{type:"button",variant:"destructive",onClick:()=>{l(a,{onSuccess:()=>{s.toast.success("Contact deleted successfully"),j(!1)},onError:a=>{s.toast.error(a.message||"Failed to delete contact")}})},disabled:o,children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})}function u({contact:a}){let[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:()=>e(!0),className:"h-10 w-10",children:(0,b.jsx)(k.Eye,{size:20})}),(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:()=>g(!0),className:"h-10 w-10 text-red-600 hover:text-red-700",children:(0,b.jsx)(l.Trash2,{size:20})})]}),(0,b.jsx)(q,{contactId:a._id,open:d,onOpenChange:e}),(0,b.jsx)(t,{contactId:a._id,contactName:a.name,open:f,onOpenChange:g})]})}let v=[{accessorKey:"name",header:"Name"},{accessorKey:"email",header:"Mail Address"},{accessorKey:"phone",header:"Phone Number"},{accessorKey:"message",header:"Messages",cell:({row:a})=>{let c=a.getValue("message");return(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"max-w-[300px] truncate ",title:c,children:c})})}},{accessorKey:"createdAt",header:"Date",cell:({row:a})=>{let b=a.getValue("createdAt");return(0,o.format)(new Date(b),"MMM dd, yyyy")}},{id:"actions",header:"Action",cell:({row:a})=>(0,b.jsx)(u,{contact:a.original})}];var w=a.i(47913),x=a.i(92502);function y(){let[a,e]=(0,c.useState)(1),{data:g}=(0,d.useSession)(),{data:k,isLoading:l,isError:m}=((a,b=1,c=10)=>(0,f.useQuery)({queryKey:["contacts",b,c],queryFn:async()=>i(await fetch(`${h}/contact?page=${b}&limit=${c}`,{headers:{Authorization:`Bearer ${a}`}})),enabled:!!a}))(g?.user?.accessToken||"",a,10);return l?(0,b.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:(0,b.jsx)(w.default,{})}):m?(0,b.jsx)(x.default,{title:"Failed to load contacts",message:"Please try again later or check your network connection.",onRetry:()=>window.location.reload()}):(0,b.jsx)("div",{className:"container mx-auto py-5",children:(0,b.jsx)(j.DataTable,{columns:v,data:k?.data||[],pagination:{page:a,pageSize:10,total:k?.pagination.total||0,onPageChange:e}})})}}];

//# sourceMappingURL=_5c06a53a._.js.map