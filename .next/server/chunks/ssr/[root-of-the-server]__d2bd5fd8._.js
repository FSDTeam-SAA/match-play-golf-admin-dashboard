module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},50944,(a,b,c)=>{b.exports=a.r(74137)},19111,a=>{"use strict";a.s(["default",()=>b]),a.i(50420);let b=a.i(57441)},68684,a=>{"use strict";a.s(["Spinner",()=>e],68684);var b=a.i(87924),c=a.i(4650),c=c,d=a.i(68114);function e({className:a,...e}){return(0,b.jsx)(c.default,{role:"status","aria-label":"Loading",className:(0,d.cn)("size-4 animate-spin",a),...e})}},34960,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(87924),c=a.i(99570),d=a.i(68684);let e=({isPending:a,title:e})=>(0,b.jsx)(c.Button,{disabled:a,type:"submit",className:"h-[45px] w-full bg-black hover:bg-black/85 text-white disabled:cursor-not-allowed",children:a?(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{children:(0,b.jsx)(d.Spinner,{})}),(0,b.jsx)("div",{children:e})]}):`${e}`})},10441,a=>{"use strict";a.s(["default",()=>B],10441);var b=a.i(87924),c=a.i(41921),d=a.i(59501),e=a.i(95245),f=a.i(19111),g=a.i(72131),h=Object.defineProperty,i=Object.defineProperties,j=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,n=(a,b,c)=>b in a?h(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,o=g.createContext({}),p=g.forwardRef((a,b)=>{var c,d,e,{value:f,onChange:h,maxLength:p,textAlign:s="left",pattern:t,placeholder:u,inputMode:v="numeric",onComplete:w,pushPasswordManagerStrategy:x="increase-width",pasteTransformer:y,containerClassName:z,noScriptCSSFallback:A=r,render:B,children:C}=a,D=((a,b)=>{var c={};for(var d in a)l.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&k)for(var d of k(a))0>b.indexOf(d)&&m.call(a,d)&&(c[d]=a[d]);return c})(a,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);let[E,F]=g.useState("string"==typeof D.defaultValue?D.defaultValue:""),G=null!=f?f:E,H=function(a){let b=g.useRef();return g.useEffect(()=>{b.current=a}),b.current}(G),I=g.useCallback(a=>{null==h||h(a),F(a)},[h]),J=g.useMemo(()=>t?"string"==typeof t?new RegExp(t):t:null,[t]),K=g.useRef(null),L=g.useRef(null),M=g.useRef({value:G,onChange:I,isIOS:!1}),N=g.useRef({prev:[null==(c=K.current)?void 0:c.selectionStart,null==(d=K.current)?void 0:d.selectionEnd,null==(e=K.current)?void 0:e.selectionDirection]});g.useImperativeHandle(b,()=>K.current,[]),g.useEffect(()=>{let a=K.current,b=L.current;if(!a||!b)return;function c(){if(document.activeElement!==a){T(null),V(null);return}let b=a.selectionStart,c=a.selectionEnd,d=a.selectionDirection,e=a.maxLength,f=a.value,g=N.current.prev,h=-1,i=-1,j;if(0!==f.length&&null!==b&&null!==c){let a=b===c,d=b===f.length&&f.length<e;if(a&&!d){if(0===b)h=0,i=1,j="forward";else if(b===e)h=b-1,i=b,j="backward";else if(e>1&&f.length>1){let a=0;if(null!==g[0]&&null!==g[1]){j=b<g[1]?"backward":"forward";let c=g[0]===g[1]&&g[0]<e;"backward"!==j||c||(a=-1)}h=a+b,i=a+b+1}}-1!==h&&-1!==i&&h!==i&&K.current.setSelectionRange(h,i,j)}let k=-1!==h?h:b,l=-1!==i?i:c,m=null!=j?j:d;T(k),V(l),N.current.prev=[k,l,m]}if(M.current.value!==a.value&&M.current.onChange(a.value),N.current.prev=[a.selectionStart,a.selectionEnd,a.selectionDirection],document.addEventListener("selectionchange",c,{capture:!0}),c(),document.activeElement===a&&R(!0),!document.getElementById("input-otp-style")){let a=document.createElement("style");if(a.id="input-otp-style",document.head.appendChild(a),a.sheet){let b="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";q(a.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),q(a.sheet,`[data-input-otp]:autofill { ${b} }`),q(a.sheet,`[data-input-otp]:-webkit-autofill { ${b} }`),q(a.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),q(a.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let d=()=>{b&&b.style.setProperty("--root-height",`${a.clientHeight}px`)};d();let e=new ResizeObserver(d);return e.observe(a),()=>{document.removeEventListener("selectionchange",c,{capture:!0}),e.disconnect()}},[]);let[O,P]=g.useState(!1),[Q,R]=g.useState(!1),[S,T]=g.useState(null),[U,V]=g.useState(null);g.useEffect(()=>{!function(a){setTimeout(a,0),setTimeout(a,10),setTimeout(a,50)}(()=>{var a,b,c,d;null==(a=K.current)||a.dispatchEvent(new Event("input"));let e=null==(b=K.current)?void 0:b.selectionStart,f=null==(c=K.current)?void 0:c.selectionEnd,g=null==(d=K.current)?void 0:d.selectionDirection;null!==e&&null!==f&&(T(e),V(f),N.current.prev=[e,f,g])})},[G,Q]),g.useEffect(()=>{void 0!==H&&G!==H&&H.length<p&&G.length===p&&(null==w||w(G))},[p,w,H,G]);let W=function({containerRef:a,inputRef:b,pushPasswordManagerStrategy:c,isFocused:d}){let[e,f]=g.useState(!1),[h,i]=g.useState(!1),[j,k]=g.useState(!1),l=g.useMemo(()=>"none"!==c&&("increase-width"===c||"experimental-no-flickering"===c)&&e&&h,[e,h,c]),m=g.useCallback(()=>{let d=a.current,e=b.current;if(!d||!e||j||"none"===c)return;let g=d.getBoundingClientRect().left+d.offsetWidth,h=d.getBoundingClientRect().top+d.offsetHeight/2;0===document.querySelectorAll('[data-lastpass-icon-root],com-1password-button,[data-dashlanecreated],[style$="2147483647 !important;"]').length&&document.elementFromPoint(g-18,h)===d||(f(!0),k(!0))},[a,b,j,c]);return g.useEffect(()=>{let b=a.current;if(!b||"none"===c)return;function d(){i(window.innerWidth-b.getBoundingClientRect().right>=40)}d();let e=setInterval(d,1e3);return()=>{clearInterval(e)}},[a,c]),g.useEffect(()=>{let a=d||document.activeElement===b.current;if("none"===c||!a)return;let e=setTimeout(m,0),f=setTimeout(m,2e3),g=setTimeout(m,5e3),h=setTimeout(()=>{k(!0)},6e3);return()=>{clearTimeout(e),clearTimeout(f),clearTimeout(g),clearTimeout(h)}},[b,d,c,m]),{hasPWMBadge:e,willPushPWMBadge:l,PWM_BADGE_SPACE_WIDTH:"40px"}}({containerRef:L,inputRef:K,pushPasswordManagerStrategy:x,isFocused:Q}),X=g.useCallback(a=>{let b=a.currentTarget.value.slice(0,p);if(b.length>0&&J&&!J.test(b))return void a.preventDefault();"string"==typeof H&&b.length<H.length&&document.dispatchEvent(new Event("selectionchange")),I(b)},[p,I,H,J]),Y=g.useCallback(()=>{var a;if(K.current){let b=Math.min(K.current.value.length,p-1),c=K.current.value.length;null==(a=K.current)||a.setSelectionRange(b,c),T(b),V(c)}R(!0)},[p]),Z=g.useCallback(a=>{var b,c;let d=K.current;if(!y&&(!M.current.isIOS||!a.clipboardData||!d))return;let e=a.clipboardData.getData("text/plain"),f=y?y(e):e;a.preventDefault();let g=null==(b=K.current)?void 0:b.selectionStart,h=null==(c=K.current)?void 0:c.selectionEnd,i=(g!==h?G.slice(0,g)+f+G.slice(h):G.slice(0,g)+f+G.slice(g)).slice(0,p);if(i.length>0&&J&&!J.test(i))return;d.value=i,I(i);let j=Math.min(i.length,p-1),k=i.length;d.setSelectionRange(j,k),T(j),V(k)},[p,I,J,G]),$=g.useMemo(()=>({position:"relative",cursor:D.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[D.disabled]),_=g.useMemo(()=>({position:"absolute",inset:0,width:W.willPushPWMBadge?`calc(100% + ${W.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:W.willPushPWMBadge?`inset(0 ${W.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:s,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[W.PWM_BADGE_SPACE_WIDTH,W.willPushPWMBadge,s]),aa=g.useMemo(()=>g.createElement("input",i(((a,b)=>{for(var c in b||(b={}))l.call(b,c)&&n(a,c,b[c]);if(k)for(var c of k(b))m.call(b,c)&&n(a,c,b[c]);return a})({autoComplete:D.autoComplete||"one-time-code"},D),j({"data-input-otp":!0,"data-input-otp-placeholder-shown":0===G.length||void 0,"data-input-otp-mss":S,"data-input-otp-mse":U,inputMode:v,pattern:null==J?void 0:J.source,"aria-placeholder":u,style:_,maxLength:p,value:G,ref:K,onPaste:a=>{var b;Z(a),null==(b=D.onPaste)||b.call(D,a)},onChange:X,onMouseOver:a=>{var b;P(!0),null==(b=D.onMouseOver)||b.call(D,a)},onMouseLeave:a=>{var b;P(!1),null==(b=D.onMouseLeave)||b.call(D,a)},onFocus:a=>{var b;Y(),null==(b=D.onFocus)||b.call(D,a)},onBlur:a=>{var b;R(!1),null==(b=D.onBlur)||b.call(D,a)}}))),[X,Y,Z,v,_,p,U,S,D,null==J?void 0:J.source,G]),ab=g.useMemo(()=>({slots:Array.from({length:p}).map((a,b)=>{var c;let d=Q&&null!==S&&null!==U&&(S===U&&b===S||b>=S&&b<U),e=void 0!==G[b]?G[b]:null;return{char:e,placeholderChar:void 0!==G[0]?null:null!=(c=null==u?void 0:u[b])?c:null,isActive:d,hasFakeCaret:d&&null===e}}),isFocused:Q,isHovering:!D.disabled&&O}),[Q,O,p,U,S,D.disabled,G]),ac=g.useMemo(()=>B?B(ab):g.createElement(o.Provider,{value:ab},C),[C,ab,B]);return g.createElement(g.Fragment,null,null!==A&&g.createElement("noscript",null,g.createElement("style",null,A)),g.createElement("div",{ref:L,"data-input-otp-container":!0,style:$,className:z},ac,g.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},aa)))});function q(a,b){try{a.insertRule(b)}catch(a){console.error("input-otp could not insert CSS rule:",b)}}p.displayName="Input";var r=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;(0,a.i(70106).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var s=a.i(68114);function t({className:a,containerClassName:c,...d}){return(0,b.jsx)(p,{"data-slot":"input-otp",containerClassName:(0,s.cn)("flex items-center gap-2 has-disabled:opacity-50",c),className:(0,s.cn)("disabled:cursor-not-allowed",a),...d})}function u({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"input-otp-group",className:(0,s.cn)("flex items-center",a),...c})}function v({index:a,className:c,...d}){let e=g.useContext(o),{char:f,hasFakeCaret:h,isActive:i}=e?.slots[a]??{};return(0,b.jsxs)("div",{"data-slot":"input-otp-slot","data-active":i,className:(0,s.cn)("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",c),...d,children:[f,h&&(0,b.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}var w=a.i(70025),x=a.i(23292),y=a.i(50944),z=a.i(34960);let A=f.default.object({otp:f.default.string().min(6,{message:"OTP must be 6 characters."})}),B=()=>{let a=(0,y.useRouter)(),f=(0,y.useSearchParams)(),[h,i]=(0,g.useState)(null),[j,k]=(0,g.useState)(!1);(0,g.useEffect)(()=>{let a=f.get("email");a&&i(decodeURIComponent(a))},[f]);let l=(0,e.useForm)({resolver:(0,d.zodResolver)(A),defaultValues:{otp:""}}),{mutateAsync:m,isPending:n}=(0,w.useMutation)({mutationKey:["verify-otp"],mutationFn:async a=>{let b=h?{...a,email:h}:a,c=await fetch("http://localhost:5000/api/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();if(!c.ok)throw Error(d?.message||"Something went wrong");return d},onSuccess:async b=>{if(x.toast.success(b?.message),h){let b=encodeURIComponent(h);a.push(`/reset-password?email=${b}`)}else a.push("/reset-password")},onError:async a=>{x.toast.error(a?.message),l.setValue("otp","")}});async function o(a){try{await m(a)}catch(a){console.error(`OTP verification error: ${a}`)}}let p=async()=>{if(!h)return void x.toast.error("Email not found. Please go back to forgot password page.");try{k(!0);let a=await fetch("http://localhost:5000/api/auth/forget-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h})}),b=await a.json();if(!a.ok)throw Error(b?.message||"Failed to resend OTP");x.toast.success("OTP resent successfully!"),l.setValue("otp","")}catch(a){if(a instanceof Error)throw Error(a.message);throw Error("Login failed")}finally{k(!1)}};return(0,b.jsxs)("div",{children:[h&&(0,b.jsx)("div",{className:"mb-4 text-center",children:(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["OTP sent to: ",(0,b.jsx)("span",{className:"font-medium",children:h})]})}),(0,b.jsx)(c.Form,{...l,children:(0,b.jsxs)("form",{onSubmit:l.handleSubmit(o),className:"space-y-5",children:[(0,b.jsx)(c.FormField,{control:l.control,name:"otp",render:({field:a})=>(0,b.jsxs)(c.FormItem,{className:"flex flex-col items-center",children:[(0,b.jsx)(c.FormControl,{children:(0,b.jsx)(t,{maxLength:6,...a,onComplete:a=>{6===a.length&&l.handleSubmit(o)()},children:(0,b.jsx)(u,{className:"gap-2 sm:gap-5",children:[...Array(6)].map((a,c)=>(0,b.jsx)(v,{index:c,className:"h-12 w-12 sm:h-16 sm:w-16 rounded-md border border-black text-lg"},c))})})}),(0,b.jsx)(c.FormMessage,{}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Enter the 6-digit OTP sent to your email"})]})}),(0,b.jsx)(z.default,{isPending:n,title:"Verify OTP"})]})}),(0,b.jsx)("div",{className:"mt-5 space-y-3",children:(0,b.jsxs)("div",{className:"text-center flex items-center justify-center gap-2",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Didn't receive OTP?"}),(0,b.jsx)("button",{type:"button",onClick:p,className:"font-semibold hover:underline text-black disabled:opacity-50 disabled:cursor-not-allowed",disabled:!h,children:j?"Resend OTP...":"Resend OTP"})]})})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d2bd5fd8._.js.map